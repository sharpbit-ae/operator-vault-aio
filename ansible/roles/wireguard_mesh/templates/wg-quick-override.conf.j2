# WireGuard systemd Service Resilience Configuration
# This override configuration adds auto-restart policies to ensure WireGuard VPN stays up
# Generated by Ansible Phase 2.5 - WireGuard Mesh VPN

[Unit]
Description=WireGuard {{ wireguard_interface }} Interface - {{ inventory_hostname }}
After=network-online.target
Wants=network-online.target

[Service]
# Restart policies for resilience
Restart=always
RestartSec=10s
StartLimitInterval=60s
StartLimitBurst=5

# Watchdog for health monitoring
WatchdogSec=30s

# Standard service configuration
Type=oneshot
ExecStart=/usr/bin/wg-quick up {{ wireguard_interface }}
ExecStop=/usr/bin/wg-quick down {{ wireguard_interface }}
RemainAfterExit=yes

# Process management
TimeoutStartSec=30
TimeoutStopSec=10

[Install]
WantedBy=multi-user.target
