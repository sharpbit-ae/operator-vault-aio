apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards-cluster
  namespace: vault-aio
  labels:
    grafana_dashboard: "1"
data:
  cluster-diagnostics.json: |
    {
      "annotations": {"list": []},
      "editable": true,
      "id": null,
      "links": [],
      "panels": [
        {"gridPos": {"h": 2, "w": 24, "x": 0, "y": 0}, "id": 100, "options": {"content": "# Cluster Diagnostics\nReal-time health checks and troubleshooting information", "mode": "markdown"}, "title": "", "transparent": true, "type": "text"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 0, "y": 2},
          "id": 1,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"vault\"}", "refId": "A"}],
          "title": "Vault",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 3, "y": 2},
          "id": 2,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"prometheus\"}", "refId": "A"}],
          "title": "Prometheus",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 6, "y": 2},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"loki\"}", "refId": "A"}],
          "title": "Loki",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 9, "y": 2},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"tempo\"}", "refId": "A"}],
          "title": "Tempo",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 12, "y": 2},
          "id": 5,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"alertmanager\"}", "refId": "A"}],
          "title": "Alertmanager",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 15, "y": 2},
          "id": 6,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"grafana\"}", "refId": "A"}],
          "title": "Grafana",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [{"options": {"1": {"text": "UP", "color": "green"}, "0": {"text": "DOWN", "color": "red"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 3, "x": 18, "y": 2},
          "id": 7,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"integrations/unix\"}", "refId": "A"}],
          "title": "Host/Alloy",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}, "unit": "short"}},
          "gridPos": {"h": 3, "w": 3, "x": 21, "y": 2},
          "id": 8,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "count(up == 0) or vector(0)", "refId": "A"}],
          "title": "Down Count",
          "type": "stat"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 5}, "id": 200, "title": "Scrape Target Details", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"custom": {"displayMode": "auto"}}},
          "gridPos": {"h": 6, "w": 24, "x": 0, "y": 6},
          "id": 9,
          "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "Value"}]},
          "targets": [{"expr": "up", "format": "table", "instant": true, "refId": "A"}],
          "title": "All Scrape Targets",
          "transformations": [
            {"id": "organize", "options": {"excludeByName": {"Time": true, "__name__": true}, "renameByName": {"Value": "Status (1=UP)", "instance": "Instance", "job": "Job"}}}
          ],
          "type": "table"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 12}, "id": 201, "title": "Prometheus Scrape Health", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "s"}},
          "gridPos": {"h": 6, "w": 12, "x": 0, "y": 13},
          "id": 10,
          "targets": [
            {"expr": "scrape_duration_seconds", "legendFormat": "{{job}}", "refId": "A"}
          ],
          "title": "Scrape Duration by Job",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "short"}},
          "gridPos": {"h": 6, "w": 12, "x": 12, "y": 13},
          "id": 11,
          "targets": [
            {"expr": "scrape_samples_scraped", "legendFormat": "{{job}}", "refId": "A"}
          ],
          "title": "Samples Scraped by Job",
          "type": "timeseries"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 19}, "id": 202, "title": "Log Collection Health", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "short"}},
          "gridPos": {"h": 6, "w": 12, "x": 0, "y": 20},
          "id": 12,
          "targets": [
            {"expr": "loki_ingester_streams_created_total - loki_ingester_streams_removed_total", "legendFormat": "Active Streams", "refId": "A"}
          ],
          "title": "Loki Active Streams",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "ops"}},
          "gridPos": {"h": 6, "w": 12, "x": 12, "y": 20},
          "id": 13,
          "targets": [
            {"expr": "rate(loki_distributor_lines_received_total[5m])", "legendFormat": "Lines Received/s", "refId": "A"},
            {"expr": "rate(loki_distributor_bytes_received_total[5m])", "legendFormat": "Bytes Received/s", "refId": "B"}
          ],
          "title": "Loki Ingestion Rate",
          "type": "timeseries"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 26}, "id": 203, "title": "Recent Logs by Source", "type": "row"},
        {
          "datasource": {"type": "loki", "uid": "loki"},
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 27},
          "id": 14,
          "options": {"dedupStrategy": "none", "enableLogDetails": true, "prettifyLogMessage": false, "showCommonLabels": false, "showLabels": true, "showTime": true, "sortOrder": "Descending", "wrapLogMessage": false},
          "targets": [{"expr": "{namespace=\"vault-aio\"}", "refId": "A", "maxLines": 20}],
          "title": "All vault-aio Namespace Logs (Last 20)",
          "type": "logs"
        },
        {
          "datasource": {"type": "loki", "uid": "loki"},
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 31},
          "id": 15,
          "options": {"dedupStrategy": "none", "enableLogDetails": true, "prettifyLogMessage": false, "showCommonLabels": false, "showLabels": true, "showTime": true, "sortOrder": "Descending", "wrapLogMessage": false},
          "targets": [{"expr": "{job=~\".+\"}", "refId": "A", "maxLines": 20}],
          "title": "All Logs (Any Job - Last 20)",
          "type": "logs"
        },
        {
          "datasource": {"type": "loki", "uid": "loki"},
          "fieldConfig": {"defaults": {"custom": {"displayMode": "auto"}}},
          "gridPos": {"h": 5, "w": 24, "x": 0, "y": 35},
          "id": 16,
          "options": {"showHeader": true},
          "targets": [{"expr": "count_over_time({namespace=\"vault-aio\"}[1h])", "legendFormat": "", "refId": "A", "instant": true}],
          "title": "Log Count by Label (Last 1h)",
          "transformations": [{"id": "reduce", "options": {"reducers": ["sum"]}}],
          "type": "stat"
        }
      ],
      "refresh": "10s",
      "schemaVersion": 38,
      "tags": ["diagnostics", "health", "troubleshooting"],
      "time": {"from": "now-1h", "to": "now"},
      "title": "cluster-diagnostics",
      "uid": "cluster-diagnostics",
      "version": 1
    }
  cluster-network.json: |
    {
      "annotations": {"list": []},
      "editable": true,
      "id": null,
      "links": [],
      "panels": [
        {"gridPos": {"h": 2, "w": 24, "x": 0, "y": 0}, "id": 100, "options": {"content": "# Cluster Network\nNetwork connectivity, throughput, and request latency", "mode": "markdown"}, "title": "", "transparent": true, "type": "text"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}},
          "gridPos": {"h": 3, "w": 6, "x": 0, "y": 2},
          "id": 1,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "sum(rate(node_network_receive_bytes_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m]))", "refId": "A"}],
          "title": "Network RX",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}},
          "gridPos": {"h": 3, "w": 6, "x": 6, "y": 2},
          "id": 2,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "sum(rate(node_network_transmit_bytes_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m]))", "refId": "A"}],
          "title": "Network TX",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.1}, {"color": "red", "value": 0.5}]}, "unit": "s"}},
          "gridPos": {"h": 3, "w": 6, "x": 12, "y": 2},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "histogram_quantile(0.99, rate(prometheus_http_request_duration_seconds_bucket[5m]))", "refId": "A"}],
          "title": "Prometheus p99 Latency",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.1}, {"color": "red", "value": 0.5}]}, "unit": "s"}},
          "gridPos": {"h": 3, "w": 6, "x": 18, "y": 2},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "histogram_quantile(0.99, rate(loki_request_duration_seconds_bucket[5m]))", "refId": "A"}],
          "title": "Loki p99 Latency",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "s"}},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 5},
          "id": 5,
          "targets": [
            {"expr": "histogram_quantile(0.50, rate(prometheus_http_request_duration_seconds_bucket[5m]))", "legendFormat": "Prometheus p50", "refId": "A"},
            {"expr": "histogram_quantile(0.95, rate(prometheus_http_request_duration_seconds_bucket[5m]))", "legendFormat": "Prometheus p95", "refId": "B"},
            {"expr": "histogram_quantile(0.99, rate(prometheus_http_request_duration_seconds_bucket[5m]))", "legendFormat": "Prometheus p99", "refId": "C"}
          ],
          "title": "Prometheus HTTP Latency",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "s"}},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 5},
          "id": 6,
          "targets": [
            {"expr": "histogram_quantile(0.50, rate(loki_request_duration_seconds_bucket[5m]))", "legendFormat": "Loki p50", "refId": "A"},
            {"expr": "histogram_quantile(0.95, rate(loki_request_duration_seconds_bucket[5m]))", "legendFormat": "Loki p95", "refId": "B"},
            {"expr": "histogram_quantile(0.99, rate(loki_request_duration_seconds_bucket[5m]))", "legendFormat": "Loki p99", "refId": "C"}
          ],
          "title": "Loki Request Latency",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "Bps"}},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 13},
          "id": 7,
          "targets": [
            {"expr": "rate(node_network_receive_bytes_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m])", "legendFormat": "{{device}} RX", "refId": "A"},
            {"expr": "rate(node_network_transmit_bytes_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m])", "legendFormat": "{{device}} TX", "refId": "B"}
          ],
          "title": "Network Throughput by Interface",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "pps"}},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 13},
          "id": 8,
          "targets": [
            {"expr": "rate(node_network_receive_packets_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m])", "legendFormat": "{{device}} RX pkts", "refId": "A"},
            {"expr": "rate(node_network_transmit_packets_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m])", "legendFormat": "{{device}} TX pkts", "refId": "B"}
          ],
          "title": "Network Packets",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "short"}},
          "gridPos": {"h": 8, "w": 24, "x": 0, "y": 21},
          "id": 9,
          "targets": [
            {"expr": "node_sockstat_TCP_alloc{job=\"integrations/unix\"}", "legendFormat": "TCP Allocated", "refId": "A"},
            {"expr": "node_sockstat_TCP_inuse{job=\"integrations/unix\"}", "legendFormat": "TCP In Use", "refId": "B"},
            {"expr": "node_sockstat_UDP_inuse{job=\"integrations/unix\"}", "legendFormat": "UDP In Use", "refId": "C"},
            {"expr": "node_sockstat_sockets_used{job=\"integrations/unix\"}", "legendFormat": "Total Sockets", "refId": "D"}
          ],
          "title": "Socket Statistics",
          "type": "timeseries"
        }
      ],
      "refresh": "30s",
      "schemaVersion": 38,
      "tags": ["cluster", "network", "monitoring"],
      "time": {"from": "now-1h", "to": "now"},
      "title": "cluster-network",
      "uid": "cluster-network",
      "version": 1
    }
  cluster-overview.json: |
    {
      "editable": true,
      "panels": [
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 100, "title": "Service Status", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"mappings": [{"options": {"1": {"text": "UP"}, "0": {"text": "DOWN"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 0, "y": 1},
          "id": 1,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"vault\"}", "refId": "A"}],
          "title": "Vault",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"mappings": [{"options": {"1": {"text": "UP"}, "0": {"text": "DOWN"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 4, "y": 1},
          "id": 2,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"prometheus\"}", "refId": "A"}],
          "title": "Prometheus",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"mappings": [{"options": {"1": {"text": "UP"}, "0": {"text": "DOWN"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 8, "y": 1},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"loki\"}", "refId": "A"}],
          "title": "Loki",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"mappings": [{"options": {"1": {"text": "UP"}, "0": {"text": "DOWN"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 12, "y": 1},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"tempo\"}", "refId": "A"}],
          "title": "Tempo",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"mappings": [{"options": {"1": {"text": "UP"}, "0": {"text": "DOWN"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 16, "y": 1},
          "id": 5,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"alertmanager\"}", "refId": "A"}],
          "title": "Alertmanager",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"mappings": [{"options": {"1": {"text": "UP"}, "0": {"text": "DOWN"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 20, "y": 1},
          "id": 6,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "max(up{job=\"integrations/unix\"})", "refId": "A"}],
          "title": "Host",
          "type": "stat"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 4}, "id": 101, "title": "Request Lifecycle: Inbound -> Process -> Response", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "reqps", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 0, "y": 5},
          "id": 10,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "sum(rate(prometheus_http_requests_total[5m]))", "refId": "A"}],
          "title": "Prometheus Req/s",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "reqps", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 6, "y": 5},
          "id": 11,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "sum(rate(loki_request_duration_seconds_count[5m]))", "refId": "A"}],
          "title": "Loki Req/s",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "s", "decimals": 3, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.1}, {"color": "red", "value": 0.5}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 12, "y": 5},
          "id": 12,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "histogram_quantile(0.95, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (le))", "refId": "A"}],
          "title": "Prometheus p95",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "s", "decimals": 3, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.1}, {"color": "red", "value": 0.5}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 18, "y": 5},
          "id": 13,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "histogram_quantile(0.95, sum(rate(loki_request_duration_seconds_bucket[5m])) by (le))", "refId": "A"}],
          "title": "Loki p95",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 20, "lineWidth": 1, "showPoints": "never"}, "unit": "reqps"}},
          "gridPos": {"h": 6, "w": 12, "x": 0, "y": 8},
          "id": 14,
          "options": {"legend": {"displayMode": "list", "placement": "bottom"}},
          "targets": [
            {"expr": "sum(rate(prometheus_http_requests_total[5m])) by (handler)", "legendFormat": "{{handler}}", "refId": "A"}
          ],
          "title": "Prometheus: Requests by Handler",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 20, "lineWidth": 1, "showPoints": "never"}, "unit": "s"}},
          "gridPos": {"h": 6, "w": 12, "x": 12, "y": 8},
          "id": 15,
          "options": {"legend": {"displayMode": "list", "placement": "bottom"}},
          "targets": [
            {"expr": "histogram_quantile(0.50, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (le))", "legendFormat": "p50", "refId": "A"},
            {"expr": "histogram_quantile(0.95, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (le))", "legendFormat": "p95", "refId": "B"},
            {"expr": "histogram_quantile(0.99, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (le))", "legendFormat": "p99", "refId": "C"}
          ],
          "title": "Prometheus: Response Latency",
          "type": "timeseries"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 14}, "id": 102, "title": "Metrics Pipeline: Scrape -> Store -> Query", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 0, "y": 15},
          "id": 20,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "count(up)", "refId": "A"}],
          "title": "Targets",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 4, "y": 15},
          "id": 21,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "prometheus_tsdb_head_series", "refId": "A"}],
          "title": "Time Series",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "ops", "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 8, "y": 15},
          "id": 22,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "rate(prometheus_tsdb_head_samples_appended_total[5m])", "refId": "A"}],
          "title": "Samples/s",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "bytes", "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 12, "y": 15},
          "id": 23,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "prometheus_tsdb_storage_blocks_bytes", "refId": "A"}],
          "title": "Storage",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "s", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 0.5}, {"color": "red", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 16, "y": 15},
          "id": 24,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "avg(scrape_duration_seconds)", "refId": "A"}],
          "title": "Avg Scrape",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 4, "x": 20, "y": 15},
          "id": 25,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "count(up == 0) or vector(0)", "refId": "A"}],
          "title": "Down",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "showPoints": "never"}, "unit": "s"}},
          "gridPos": {"h": 5, "w": 12, "x": 0, "y": 18},
          "id": 26,
          "targets": [{"expr": "scrape_duration_seconds", "legendFormat": "{{job}}", "refId": "A"}],
          "title": "Scrape Duration by Job",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "showPoints": "never"}, "unit": "short"}},
          "gridPos": {"h": 5, "w": 12, "x": 12, "y": 18},
          "id": 27,
          "targets": [{"expr": "scrape_samples_scraped", "legendFormat": "{{job}}", "refId": "A"}],
          "title": "Samples Scraped by Job",
          "type": "timeseries"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 23}, "id": 103, "title": "Logs Pipeline: Collect -> Ingest -> Store", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"mode": "absolute", "steps": [{"color": "purple", "value": null}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 0, "y": 24},
          "id": 30,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "loki_ingester_streams_created_total - loki_ingester_streams_removed_total", "refId": "A"}],
          "title": "Active Streams",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "ops", "thresholds": {"mode": "absolute", "steps": [{"color": "purple", "value": null}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 6, "y": 24},
          "id": 31,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "rate(loki_distributor_lines_received_total[5m])", "refId": "A"}],
          "title": "Lines/s",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "Bps", "thresholds": {"mode": "absolute", "steps": [{"color": "purple", "value": null}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 12, "y": 24},
          "id": 32,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "rate(loki_distributor_bytes_received_total[5m])", "refId": "A"}],
          "title": "Bytes/s",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}},
          "gridPos": {"h": 3, "w": 6, "x": 18, "y": 24},
          "id": 33,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "sum(rate(loki_distributor_lines_failed_total[5m])) or vector(0)", "refId": "A"}],
          "title": "Failed Lines",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 20, "lineWidth": 1, "showPoints": "never"}, "unit": "ops"}},
          "gridPos": {"h": 5, "w": 24, "x": 0, "y": 27},
          "id": 34,
          "targets": [
            {"expr": "rate(loki_distributor_lines_received_total[5m])", "legendFormat": "Lines Received", "refId": "A"},
            {"expr": "rate(loki_ingester_streams_created_total[5m])", "legendFormat": "Streams Created", "refId": "B"}
          ],
          "title": "Loki Ingestion Over Time",
          "type": "timeseries"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 32}, "id": 104, "title": "Resource Usage by Service", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 20, "lineWidth": 1, "showPoints": "never", "stacking": {"mode": "normal"}}, "unit": "bytes"}},
          "gridPos": {"h": 6, "w": 12, "x": 0, "y": 33},
          "id": 40,
          "targets": [
            {"expr": "process_resident_memory_bytes{job=\"vault\"}", "legendFormat": "Vault", "refId": "A"},
            {"expr": "process_resident_memory_bytes{job=\"prometheus\"}", "legendFormat": "Prometheus", "refId": "B"},
            {"expr": "process_resident_memory_bytes{job=\"loki\"}", "legendFormat": "Loki", "refId": "C"},
            {"expr": "process_resident_memory_bytes{job=\"tempo\"}", "legendFormat": "Tempo", "refId": "D"},
            {"expr": "process_resident_memory_bytes{job=\"alertmanager\"}", "legendFormat": "Alertmanager", "refId": "E"}
          ],
          "title": "Memory by Service (Stacked)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "showPoints": "never"}, "unit": "percentunit"}},
          "gridPos": {"h": 6, "w": 12, "x": 12, "y": 33},
          "id": 41,
          "targets": [
            {"expr": "rate(process_cpu_seconds_total{job=\"vault\"}[5m])", "legendFormat": "Vault", "refId": "A"},
            {"expr": "rate(process_cpu_seconds_total{job=\"prometheus\"}[5m])", "legendFormat": "Prometheus", "refId": "B"},
            {"expr": "rate(process_cpu_seconds_total{job=\"loki\"}[5m])", "legendFormat": "Loki", "refId": "C"},
            {"expr": "rate(process_cpu_seconds_total{job=\"tempo\"}[5m])", "legendFormat": "Tempo", "refId": "D"},
            {"expr": "rate(process_cpu_seconds_total{job=\"alertmanager\"}[5m])", "legendFormat": "Alertmanager", "refId": "E"}
          ],
          "title": "CPU by Service",
          "type": "timeseries"
        },
        {"gridPos": {"h": 1, "w": 24, "x": 0, "y": 39}, "id": 105, "title": "Connection Stats", "type": "row"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "showPoints": "never"}, "unit": "short"}},
          "gridPos": {"h": 6, "w": 12, "x": 0, "y": 40},
          "id": 50,
          "targets": [
            {"expr": "node_sockstat_TCP_alloc{job=\"integrations/unix\"}", "legendFormat": "TCP Allocated", "refId": "A"},
            {"expr": "node_sockstat_TCP_inuse{job=\"integrations/unix\"}", "legendFormat": "TCP In Use", "refId": "B"},
            {"expr": "node_sockstat_sockets_used{job=\"integrations/unix\"}", "legendFormat": "Total Sockets", "refId": "C"}
          ],
          "title": "Socket Statistics",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "showPoints": "never"}, "unit": "connps"}},
          "gridPos": {"h": 6, "w": 12, "x": 12, "y": 40},
          "id": 51,
          "targets": [
            {"expr": "rate(node_netstat_Tcp_ActiveOpens{job=\"integrations/unix\"}[5m])", "legendFormat": "TCP Opens (Active)", "refId": "A"},
            {"expr": "rate(node_netstat_Tcp_PassiveOpens{job=\"integrations/unix\"}[5m])", "legendFormat": "TCP Opens (Passive)", "refId": "B"},
            {"expr": "rate(node_netstat_Tcp_CurrEstab{job=\"integrations/unix\"}[5m])", "legendFormat": "Established", "refId": "C"}
          ],
          "title": "TCP Connection Rate",
          "type": "timeseries"
        }
      ],
      "refresh": "30s",
      "schemaVersion": 38,
      "tags": ["cluster", "overview", "lifecycle"],
      "time": {"from": "now-1h", "to": "now"},
      "title": "Cluster Overview",
      "uid": "cluster-overview"
    }
  cluster-resources.json: |
    {
      "annotations": {"list": []},
      "editable": true,
      "id": null,
      "links": [],
      "panels": [
        {"gridPos": {"h": 2, "w": 24, "x": 0, "y": 0}, "id": 100, "options": {"content": "# Cluster Resources\nCPU, memory, and storage utilization across all services", "mode": "markdown"}, "title": "", "transparent": true, "type": "text"},
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 20, "lineWidth": 1, "pointSize": 5, "showPoints": "never", "stacking": {"mode": "normal"}}, "unit": "bytes"}},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 2},
          "id": 1,
          "targets": [
            {"expr": "go_memstats_heap_inuse_bytes{job=\"vault\"}", "legendFormat": "Vault", "refId": "A"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"prometheus\"}", "legendFormat": "Prometheus", "refId": "B"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"loki\"}", "legendFormat": "Loki", "refId": "C"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"tempo\"}", "legendFormat": "Tempo", "refId": "D"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"alertmanager\"}", "legendFormat": "Alertmanager", "refId": "E"}
          ],
          "title": "Service Heap Memory (Stacked)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "percentunit"}},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 2},
          "id": 2,
          "targets": [
            {"expr": "rate(process_cpu_seconds_total{job=\"vault\"}[5m])", "legendFormat": "Vault", "refId": "A"},
            {"expr": "rate(process_cpu_seconds_total{job=\"prometheus\"}[5m])", "legendFormat": "Prometheus", "refId": "B"},
            {"expr": "rate(process_cpu_seconds_total{job=\"loki\"}[5m])", "legendFormat": "Loki", "refId": "C"},
            {"expr": "rate(process_cpu_seconds_total{job=\"tempo\"}[5m])", "legendFormat": "Tempo", "refId": "D"},
            {"expr": "rate(process_cpu_seconds_total{job=\"alertmanager\"}[5m])", "legendFormat": "Alertmanager", "refId": "E"}
          ],
          "title": "Service CPU Usage",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 90}]}, "unit": "percent", "max": 100}},
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 10},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "100 * (1 - (node_memory_MemAvailable_bytes{job=\"integrations/unix\"} / node_memory_MemTotal_bytes{job=\"integrations/unix\"}))", "refId": "A"}],
          "title": "Host Memory %",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 90}]}, "unit": "percent", "max": 100}},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 10},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "100 * (1 - (node_filesystem_avail_bytes{job=\"integrations/unix\",mountpoint=\"/\"} / node_filesystem_size_bytes{job=\"integrations/unix\",mountpoint=\"/\"}))", "refId": "A"}],
          "title": "Host Disk %",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "bytes"}},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 10},
          "id": 5,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "node_memory_MemTotal_bytes{job=\"integrations/unix\"}", "refId": "A"}],
          "title": "Total Memory",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "bytes"}},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 10},
          "id": 6,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "node_filesystem_size_bytes{job=\"integrations/unix\",mountpoint=\"/\"}", "refId": "A"}],
          "title": "Total Disk",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 10},
          "id": 7,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "count(node_cpu_seconds_total{job=\"integrations/unix\",mode=\"idle\"})", "refId": "A"}],
          "title": "CPU Cores",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "s"}},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 10},
          "id": 8,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "node_time_seconds{job=\"integrations/unix\"} - node_boot_time_seconds{job=\"integrations/unix\"}", "refId": "A"}],
          "title": "Host Uptime",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "bytes"}},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
          "id": 9,
          "targets": [
            {"expr": "node_memory_MemTotal_bytes{job=\"integrations/unix\"} - node_memory_MemAvailable_bytes{job=\"integrations/unix\"}", "legendFormat": "Used", "refId": "A"},
            {"expr": "node_memory_MemAvailable_bytes{job=\"integrations/unix\"}", "legendFormat": "Available", "refId": "B"},
            {"expr": "node_memory_Cached_bytes{job=\"integrations/unix\"}", "legendFormat": "Cached", "refId": "C"}
          ],
          "title": "Host Memory",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "percentunit"}},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
          "id": 10,
          "targets": [
            {"expr": "1 - avg(rate(node_cpu_seconds_total{job=\"integrations/unix\",mode=\"idle\"}[5m]))", "legendFormat": "CPU Usage", "refId": "A"}
          ],
          "title": "Host CPU Usage",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "Bps"}},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 22},
          "id": 11,
          "targets": [
            {"expr": "rate(node_network_receive_bytes_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m])", "legendFormat": "{{device}} RX", "refId": "A"},
            {"expr": "-rate(node_network_transmit_bytes_total{job=\"integrations/unix\",device!~\"lo|veth.*|docker.*|br.*\"}[5m])", "legendFormat": "{{device}} TX", "refId": "B"}
          ],
          "title": "Network I/O",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"}, "unit": "Bps"}},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 22},
          "id": 12,
          "targets": [
            {"expr": "rate(node_disk_read_bytes_total{job=\"integrations/unix\"}[5m])", "legendFormat": "{{device}} Read", "refId": "A"},
            {"expr": "-rate(node_disk_written_bytes_total{job=\"integrations/unix\"}[5m])", "legendFormat": "{{device}} Write", "refId": "B"}
          ],
          "title": "Disk I/O",
          "type": "timeseries"
        }
      ],
      "refresh": "30s",
      "schemaVersion": 38,
      "tags": ["cluster", "resources", "monitoring"],
      "time": {"from": "now-1h", "to": "now"},
      "title": "cluster-resources",
      "uid": "cluster-resources",
      "version": 1
    }
  cluster-services-health.json: |
    {
      "annotations": {"list": []},
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": null,
      "links": [],
      "liveNow": false,
      "panels": [
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 0},
          "id": 100,
          "options": {"content": "# Services Health Dashboard\nReal-time status of all Vault AIO services", "mode": "markdown"},
          "title": "",
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"1": {"text": "HEALTHY", "color": "green"}}, "type": "value"},
                {"options": {"0": {"text": "DOWN", "color": "red"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 0, "y": 2},
          "id": 1,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"vault\"}", "legendFormat": "", "refId": "A"}],
          "title": "Vault",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"1": {"text": "HEALTHY", "color": "green"}}, "type": "value"},
                {"options": {"0": {"text": "DOWN", "color": "red"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 4, "y": 2},
          "id": 2,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"prometheus\"}", "legendFormat": "", "refId": "A"}],
          "title": "Prometheus",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"1": {"text": "HEALTHY", "color": "green"}}, "type": "value"},
                {"options": {"0": {"text": "DOWN", "color": "red"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 8, "y": 2},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"loki\"}", "legendFormat": "", "refId": "A"}],
          "title": "Loki",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"1": {"text": "HEALTHY", "color": "green"}}, "type": "value"},
                {"options": {"0": {"text": "DOWN", "color": "red"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 12, "y": 2},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"tempo\"}", "legendFormat": "", "refId": "A"}],
          "title": "Tempo",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"1": {"text": "HEALTHY", "color": "green"}}, "type": "value"},
                {"options": {"0": {"text": "DOWN", "color": "red"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 16, "y": 2},
          "id": 5,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"alertmanager\"}", "legendFormat": "", "refId": "A"}],
          "title": "Alertmanager",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"1": {"text": "HEALTHY", "color": "green"}}, "type": "value"},
                {"options": {"0": {"text": "DOWN", "color": "red"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 20, "y": 2},
          "id": 6,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"]}, "textMode": "value"},
          "targets": [{"expr": "up{job=\"integrations/unix\"}", "legendFormat": "", "refId": "A"}],
          "title": "Host VM",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"},
              "unit": "s"
            }
          },
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 5},
          "id": 7,
          "targets": [
            {"expr": "histogram_quantile(0.99, rate(prometheus_http_request_duration_seconds_bucket[5m]))", "legendFormat": "Prometheus p99", "refId": "A"},
            {"expr": "histogram_quantile(0.99, rate(loki_request_duration_seconds_bucket[5m]))", "legendFormat": "Loki p99", "refId": "B"}
          ],
          "title": "Service Latency (p99)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"},
              "unit": "ops"
            }
          },
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 5},
          "id": 8,
          "targets": [
            {"expr": "rate(loki_ingester_streams_created_total[5m])", "legendFormat": "Loki Streams Created", "refId": "A"},
            {"expr": "rate(loki_distributor_lines_received_total[5m])", "legendFormat": "Loki Lines Received", "refId": "B"}
          ],
          "title": "Loki Ingestion Rate",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"},
              "unit": "ops"
            }
          },
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 13},
          "id": 9,
          "targets": [
            {"expr": "rate(tempo_distributor_spans_received_total[5m])", "legendFormat": "Spans Received", "refId": "A"},
            {"expr": "rate(tempo_ingester_traces_created_total[5m])", "legendFormat": "Traces Created", "refId": "B"}
          ],
          "title": "Tempo Trace Ingestion",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"},
              "unit": "short"
            }
          },
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 13},
          "id": 10,
          "targets": [
            {"expr": "alertmanager_alerts{state=\"active\"}", "legendFormat": "Active Alerts", "refId": "A"},
            {"expr": "alertmanager_alerts{state=\"suppressed\"}", "legendFormat": "Suppressed", "refId": "B"}
          ],
          "title": "Alertmanager Alerts",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"drawStyle": "line", "fillOpacity": 10, "lineWidth": 1, "pointSize": 5, "showPoints": "never"},
              "unit": "bytes"
            }
          },
          "gridPos": {"h": 8, "w": 24, "x": 0, "y": 21},
          "id": 11,
          "targets": [
            {"expr": "go_memstats_heap_inuse_bytes{job=\"prometheus\"}", "legendFormat": "Prometheus Heap", "refId": "A"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"loki\"}", "legendFormat": "Loki Heap", "refId": "B"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"tempo\"}", "legendFormat": "Tempo Heap", "refId": "C"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"alertmanager\"}", "legendFormat": "Alertmanager Heap", "refId": "D"},
            {"expr": "go_memstats_heap_inuse_bytes{job=\"vault\"}", "legendFormat": "Vault Heap", "refId": "E"}
          ],
          "title": "Go Heap Memory (All Services)",
          "type": "timeseries"
        }
      ],
      "refresh": "30s",
      "schemaVersion": 38,
      "style": "dark",
      "tags": ["services", "health", "monitoring"],
      "templating": {"list": []},
      "time": {"from": "now-1h", "to": "now"},
      "timepicker": {},
      "timezone": "",
      "title": "cluster-services-health",
      "uid": "cluster-services-health",
      "version": 1
    }
